% bristoltheme.sty
\ProvidesPackage{flight_lab_theme}[2025/01/21 Bristol Beamer Theme]

% --- Required Packages ---
\RequirePackage{tikz}
\RequirePackage{helvet}

% --- Colors ---
\definecolor{BristolRed}{RGB}{165, 28, 48} 
\definecolor{BristolNavy}{RGB}{0, 17, 148} 
\definecolor{BristolGreen}{RGB}{28, 120, 0}

% --- Font Definitions ---
\usefonttheme{professionalfonts}
\setbeamerfont{title}{series=\bfseries}
\setbeamerfont{frametitle}{series=\bfseries}
\setbeamerfont{author}{series=\mdseries}

% --- Global Settings ---
\setbeamercolor{structure}{fg=BristolRed}
\setbeamercolor{normal text}{fg=black}
\setbeamercolor{title}{fg=white}
\setbeamercolor{author}{fg=white}
\setbeamercolor{frametitle}{fg=black}
\setbeamercolor{itemize item}{fg=black} 
\setbeamertemplate{itemize items}[circle] 
\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{caption}[numbered]

% --- Block Styles (Bubbles) ---
\setbeamertemplate{blocks}[rounded][shadow=true]
\setbeamercolor{block title}{bg=BristolRed, fg=white}
\setbeamercolor{block body}{bg=BristolRed!10, fg=black}
\setbeamercolor{block title alert}{bg=BristolNavy, fg=white}
\setbeamercolor{block body alert}{bg=BristolNavy!10, fg=black}
\setbeamercolor{block title example}{bg=BristolGreen, fg=white}
\setbeamercolor{block body example}{bg=BristolGreen!20, fg=black}

% --- Custom Navy Block ---
\newenvironment{navyblock}[1]{%
  \setbeamercolor{block title}{bg=BristolNavy,fg=white}
  \setbeamercolor{block body}{bg=BristolNavy!10,fg=black}
  \begin{block}{#1}
}{%
  \end{block}
}

% Adjust margins
\setbeamersize{text margin left=1cm, text margin right=1cm}

% --- LIST SPACING (1.5em Default) ---
% These hooks ensure every list has 1.5em separation automatically
\addtobeamertemplate{itemize body begin}{}{\setlength{\itemsep}{5em}}
\addtobeamertemplate{enumerate body begin}{}{\setlength{\itemsep}{5em}}

\setlength{\skip\footins}{2em} 


% --- BACKGROUND TEMPLATE ---
\setbeamertemplate{background canvas}{%
    \begin{tikzpicture}[remember picture, overlay]
        \ifnum\thepage=1
            % Title Slide: Bold, 6pt inside PDF
            \node[anchor=north west, inner sep=0pt] at (current page.north west) {
                {\includegraphics[width=\paperwidth, height=\paperheight]{template/Title_red.pdf}}
            };
        \else
            % Content Slide: Bold, 6pt inside PDF
            \node[anchor=north, inner sep=0pt] at (current page.north) {
                 {\includegraphics[width=\paperwidth]{template/TopBar.pdf}}
            };
        \fi
    \end{tikzpicture}
}

% --- HEADLINE & FOOTLINE ---
\setbeamertemplate{headline}{}

\setbeamertemplate{footline}{%
    \ifnum\thepage>1
        \begin{beamercolorbox}[wd=\paperwidth,ht=1cm,dp=0.5cm,leftskip=.3cm,rightskip=.3cm]{structure}
            \begin{tikzpicture}[remember picture, overlay]
                \fill[BristolRed] (current page.south west) rectangle ([yshift=0.6cm]current page.south east);
                \node[anchor=south west] at ([xshift=0.1cm, yshift=0.1cm]current page.south west) {
            \textcolor{white}{\footnotesize\textbf\insertdate}
        };
        \node[anchor=south east] at ([xshift=-0.1cm, yshift=0.1cm]current page.south east) {
             \textcolor{white}{\footnotesize\sffamily \insertframenumber}
        };
            \end{tikzpicture}
        \end{beamercolorbox}
    \fi
}

% --- TITLE PAGE CONTENT ---
\setbeamertemplate{title page}{
    \begin{tikzpicture}[remember picture, overlay]
        \node[anchor=west, align=left, text width=10cm] at ([xshift=1cm, yshift=-0.5cm]current page.west) {
            \color{white} 
            \usebeamerfont{title}\huge \inserttitle\\[0.6cm]
            \usebeamerfont{author}\Large \insertauthor\\[0.2cm]
            \usebeamerfont{author}\large \insertinstitute
        };
        \node[anchor=south west] at ([xshift=0.1cm, yshift=0.1cm]current page.south west) {
            \textcolor{white}{\footnotesize\textbf\insertdate}
        };
        \node[anchor=south east] at ([xshift=-0.1cm, yshift=0.1cm]current page.south east) {
             \textcolor{black}{\footnotesize\sffamily \insertframenumber}
        };
    \end{tikzpicture}
}

% --- Content Slide Title Spacing ---
\setbeamertemplate{frametitle}{
    \vspace{1.5cm} 
    \color{black}\Large\insertframetitle
}